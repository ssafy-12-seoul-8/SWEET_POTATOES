# [Platinum V] 통신망 분할 - 17398 

[문제 링크](https://www.acmicpc.net/problem/17398) 

### 성능 요약

메모리: 58004 KB, 시간: 416 ms

### 분류

자료 구조, 분리 집합, 오프라인 쿼리

### 제출 일자

2024년 11월 17일 18:45:20

### 문제 설명

<p>BOJ의 인기스타, 방송인 권욱제는 통신 회사에 취업했다. 현재 이 통신 회사는 너무나 큰 통신망을 한 지사에서 관리하느라 큰 비용을 지불하고 있었다. 그래서 회사는 최근 IT의 트렌드 중 하나인 '탈중앙화'에 편승하여, 통신망을 분할하도록 결정했다. 그래서 욱제한테 통신망을 분할 할때 발생하는 비용을 분석하도록 지시했다.</p>

<p>현재 회사 망에는 1번부터 <em>N</em>번까지 총 <em>N</em>개의 통신 탑이 존재하며, 통신탑 간의 연결이 <em>M</em>개 존재한다. 이때 회사에서는 총 <em>Q</em>번 통신탑 간의 연결을 제거함으로써 하나의 통신망을 여러 개의 통신망으로 분리하려고 한다. 통신망이란, 통신탑의 연결을 통해 도달 가능한 통신탑들의 집합이다. 통신탑 간의 연결 관계를 제거할 때 드는 비용은 제거한 후 통신망이 두 개로 나누어진다면 나눠진 두 개의 통신망에 속한 통신탑들의 갯수의 곱이 되며, 나누어지지 않을 경우 0이다.</p>

<p style="text-align: center;"><img alt="" src="https://upload.acmicpc.net/d75e532b-f1f9-4284-a0ef-8f06ad920998/-/preview/"></p>

<p style="text-align: center;"><그림 1></p>

<p>그림 1을 예시로 할때, 연결 (3, 4)를 제거하면 {1, 2, 3}, {4, 5, 6}으로 분할 되며, 이때 발생하는 비용은 3 × 3 = 9가 된다. 대신 연결 (2, 3)을 제거하면, 망이 나눠지지 않았기에 비용은 0이 된다.</p>

<p>욱제는 회사의 요청에 따라 <em>Q</em>번의 제거를 통해 나오는 비용의 합을 구해야 한다. 하지만 욱제는 회사의 통신망을 이용해 방송하기 바쁘기 때문에 우리가 도와주자.</p>

### 입력 

 <p>첫 번째 줄에는 통신탑의 개수인 자연수 <em>N</em>, 통신탑 사이의 연결의 개수인 자연수 <em>M</em>, 통신망 연결 분할 횟수인 자연수 <em>Q</em>가 공백으로 구분되어 주어진다. (1 ≤ <em>N</em> ≤ 100,000, 1 ≤ <em>M</em> ≤ 100,000, 1 ≤ <em>Q</em> ≤ <em>M</em>)</p>

<p>두 번째 줄부터 <em>M</em>개의 줄에 걸쳐 두 개의 자연수 <em>X</em>, <em>Y</em>가 공백으로 구분되어 주어진다. 이는 <em>X</em> 통신탑과 <em>Y</em> 통신탑 사이에 연결이 있음을 뜻한다. (1 ≤ <em>X</em>, <em>Y</em> ≤ <em>N, X </em>≠<i> Y</i>)</p>

<p>중복된 연결은 주어지지 않으며, 모든 통신탑은 처음엔 하나의 통신망에 속한다. 조건에 의해 자기 자신과 연결이 있는 통신탑은 없다.</p>

<p>그 다음 줄부터 <em>Q</em>개의 줄에 걸쳐 제거될 연결의 번호인 자연수 <em>A</em>가 주어진다. 이는 <em>A</em>번째로 입력된 (<em>X</em>, <em>Y</em>)의 연결이 제거되었음을 의미한다. (1 ≤ <em>A</em> ≤ <em>M</em>)</p>

<p>이미 제거된 연결은 다시 제거되지 않으며, 제거는 입력 순서대로 진행된다.</p>

### 출력 

 <p>첫 번째 줄에 <em>Q</em>개의 연결을 순서대로 제거하는데 드는 비용의 합을 출력한다.</p>

